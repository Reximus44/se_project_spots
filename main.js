!function(){"use strict";const e={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit-btn",inactiveButtonClass:"modal__submit-btn_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},t=(e,t,o)=>{e.querySelector(`#${t.id}-error`).textContent="",t.classList.remove(o.inputErrorClass)},o=(e,t,o)=>{(e=>e.some((e=>!e.validity.valid)))(e)?n(t,o):(t.disabled=!1,t.classList.remove(o.inactiveButtonClass))},n=(e,t)=>{e.disabled=!0,e.classList.add(t.inactiveButtonClass)},r=e=>{document.querySelectorAll(e.formSelector).forEach((n=>{((e,n)=>{const r=Array.from(e.querySelectorAll(n.inputSelector)),a=e.querySelector(n.submitButtonSelector);o(r,a,n),r.forEach((c=>{c.addEventListener("input",(function(){((e,o,n)=>{console.log(o.validationMessage),o.validity.valid?t(e,o,n):((e,t,o)=>{e.querySelector(`#${t.id}-error`).textContent=t.validationMessage,t.classList.add(o.inputErrorClass)})(e,o,n)})(e,c,n),o(r,a,n)}))}))})(n,e)}))};r(e);const a=document.querySelector(".profile__edit-btn"),c=document.querySelector(".profile__add-btn"),l=document.querySelector(".profile__name"),s=document.querySelector(".profile__description"),i=document.querySelector("#add-card-form"),d=document.querySelector("#edit-modal"),u=d.querySelector(".modal__form"),m=(d.querySelector(".modal__close-btn"),d.querySelector("#profile-name-input")),p=d.querySelector("#profile-description-input"),_=document.querySelector("#add-card-modal"),y=_.querySelector(".modal__form"),f=_.querySelector(".modal__submit-btn"),v=(_.querySelector(".modal__close-btn"),_.querySelector("#add-card-name-input")),S=_.querySelector("#add-card-link-input"),q=document.querySelector("#preview-modal"),b=q.querySelector(".modal__image"),g=q.querySelector(".modal__caption"),h=document.querySelector(".cards__list"),w=document.querySelector("#card-template");function k(e){document.addEventListener("keydown",L),e.addEventListener("mousedown",E),e.classList.add("modal_opened")}const E=e=>{console.log(e),(e.currentTarget===e.target||e.target.classList.contains("modal__close-btn"))&&C(e.currentTarget)};function L(e){"Escape"===e.key&&C(document.querySelector(".modal_opened"))}function C(e){e.classList.remove("modal_opened"),document.removeEventListener("keydown",L),e.removeEventListener("mousedown",E)}function x(e){const t=w.content.querySelector(".card").cloneNode(!0),o=t.querySelector(".card__title"),n=t.querySelector(".card__image"),r=t.querySelector(".card__like-btn"),a=t.querySelector(".card__delete-btn");return o.textContent=e.name,n.src=e.link,n.alt=e.name,r.addEventListener("click",(()=>{r.classList.toggle("card__like-btn_liked")})),a.addEventListener("click",(()=>{t.remove()})),n.addEventListener("click",(()=>{k(q),b.src=e.link,g.textContent=e.name,b.alt=e.name})),t}a.addEventListener("click",(()=>{var o,n;m.value=l.textContent,p.value=s.textContent,o=u,n=e,[m,p].forEach((e=>{t(o,e,n)})),k(d)})),c.addEventListener("click",(()=>{k(_)})),u.addEventListener("submit",(function(e){e.preventDefault(),l.textContent=m.value,s.textContent=p.value,C(d)})),y.addEventListener("submit",(function(t){t.preventDefault();const o=x({name:v.value,link:S.value});h.prepend(o),n(f,e),C(_),i.reset()})),[{name:"Val Thorens",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/1-photo-by-moritz-feldmann-from-pexels.jpg"},{name:"Restaurant terrace",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/2-photo-by-ceiline-from-pexels.jpg"},{name:"An outdoor cafe",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/3-photo-by-tubanur-dogan-from-pexels.jpg"},{name:"A very long bridge, over the forest and through the trees",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/4-photo-by-maurice-laschet-from-pexels.jpg"},{name:"Tunnel with morning light",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/5-photo-by-van-anh-nguyen-from-pexels.jpg"},{name:"Mountain house",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/6-photo-by-moritz-feldmann-from-pexels.jpg"}].forEach((e=>{const t=x(e);h.prepend(t)})),document.querySelector(".modal__close-btn_type_preview"),document.querySelector("#preview-modal"),r(e)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QmpDLFlENUZoQkwsRUM2RmR5QyxFRDdGaUN2QyxFQzZGUVYsRUFBL0IsQ0FBQ2tELEVBQVdDLEdENUY1QnJCLFNBQVNWLElBQ2pCYixFQUFlQyxFQUFRWSxFQUFPVixFQUFPLElDNEZ2Q29ELEVBQVVkLEVBQVUsSUFPdEJKLEVBQWFQLGlCQUFpQixTQUFTLEtBQ3JDeUIsRUFBVVYsRUFBVSxJQU90QkgsRUFBU1osaUJBQWlCLFVBcEUxQixTQUE4QjZCLEdBQzVCQSxFQUFJdUIsaUJBQ0o1QyxFQUFjaEMsWUFBY3FDLEVBQVVzQyxNQUN0QzFDLEVBQXFCakMsWUFBY3NDLEVBQWlCcUMsTUFDcERsQixFQUFXdEIsRUFDYixJQWdFQUssRUFBU2hCLGlCQUFpQixVQTlEMUIsU0FBNkI2QixHQUMzQkEsRUFBSXVCLGlCQUNKLE1BQ01kLEVBQWNGLEVBREEsQ0FBRVMsS0FBTTNCLEVBQWNpQyxNQUFPSixLQUFNNUIsRUFBY2dDLFFBRXJFNUIsRUFBVThCLFFBQVFmLEdBQ2xCbkQsRUFBYzhCLEVBQWV0RCxHQUM3QnNFLEVBQVdsQixHQUNYTCxFQUFZNEMsT0FDZCxJQXRHcUIsQ0FDbkIsQ0FDRVQsS0FBTSxjQUNORSxLQUFNLDJIQUVSLENBQ0VGLEtBQU0scUJBQ05FLEtBQU0sbUhBRVIsQ0FDRUYsS0FBTSxrQkFDTkUsS0FBTSx5SEFFUixDQUNFRixLQUFNLDREQUNORSxLQUFNLDJIQUVSLENBQ0VGLEtBQU0sNEJBQ05FLEtBQU0sMEhBRVIsQ0FDRUYsS0FBTSxpQkFDTkUsS0FBTSw0SEF1SUd0RCxTQUFTOEQsSUFDcEIsTUFBTWpCLEVBQWNGLEVBQWVtQixHQUNuQ2hDLEVBQVU4QixRQUFRZixFQUFZLElBS0gvQyxTQUFTakIsY0FDcEMsa0NBR3dCaUIsU0FBU2pCLGNBQWMsa0JBTWpEZ0IsRUFBaUIzQixFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy9zY3JpcHRzL3ZhbGlkYXRpb24uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3Qgc2V0dGluZ3MgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fc3VibWl0LWJ0blwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX3N1Ym1pdC1idG5fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXHJcbn07XHJcblxyXG5jb25zdCBzaG93SW5wdXRFcnJvciA9IChmb3JtRWwsIGlucHV0RWwsIGNvbmZpZykgPT4ge1xyXG4gIGNvbnN0IGVycm9yTXNnRWwgPSBmb3JtRWwucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcclxuICBlcnJvck1zZ0VsLnRleHRDb250ZW50ID0gaW5wdXRFbC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQoY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XHJcbn07XHJcblxyXG5jb25zdCBoaWRlSW5wdXRFcnJvciA9IChmb3JtRWwsIGlucHV0RWwsIGNvbmZpZykgPT4ge1xyXG4gIGNvbnN0IGVycm9yTXNnRWwgPSBmb3JtRWwucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcclxuICBlcnJvck1zZ0VsLnRleHRDb250ZW50ID0gXCJcIjtcclxuICBpbnB1dEVsLmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XHJcbn07XHJcblxyXG5jb25zdCBjaGVja0lucHV0VmFsaWRpdHkgPSAoZm9ybUVsLCBpbnB1dEVsLCBjb25maWcpID0+IHtcclxuICBjb25zb2xlLmxvZyhpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlKTtcclxuICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcclxuICAgIHNob3dJbnB1dEVycm9yKGZvcm1FbCwgaW5wdXRFbCwgY29uZmlnKTtcclxuICB9IGVsc2Uge1xyXG4gICAgaGlkZUlucHV0RXJyb3IoZm9ybUVsLCBpbnB1dEVsLCBjb25maWcpO1xyXG4gIH1cclxufTtcclxuXHJcbmNvbnN0IGhhc0ludmFsaWRJbnB1dCA9IChpbnB1dExpc3QpID0+IHtcclxuICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0KSA9PiB7XHJcbiAgICByZXR1cm4gIWlucHV0LnZhbGlkaXR5LnZhbGlkO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuY29uc3QgdG9nZ2xlQnV0dG9uU3RhdGUgPSAoaW5wdXRMaXN0LCBidXR0b25FbCwgY29uZmlnKSA9PiB7XHJcbiAgaWYgKGhhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XHJcbiAgICBkaXNhYmxlQnV0dG9uKGJ1dHRvbkVsLCBjb25maWcpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBidXR0b25FbC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgYnV0dG9uRWwuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGRpc2FibGVCdXR0b24gPSAoYnV0dG9uRWwsIGNvbmZpZykgPT4ge1xyXG4gIGJ1dHRvbkVsLmRpc2FibGVkID0gdHJ1ZTtcclxuICBidXR0b25FbC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCByZXNldFZhbGlkYXRpb24gPSAoZm9ybUVsLCBpbnB1dExpc3QsIGNvbmZpZykgPT4ge1xyXG4gIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgaGlkZUlucHV0RXJyb3IoZm9ybUVsLCBpbnB1dCwgY29uZmlnKTtcclxuICB9KTtcclxufTtcclxuXHJcbmNvbnN0IHNldEV2ZW50TGlzdGVuZXJzID0gKGZvcm1FbGVtZW50LCBjb25maWcpID0+IHtcclxuICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmlucHV0U2VsZWN0b3IpKTtcclxuICBjb25zdCBidXR0b25FbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcihjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG5cclxuICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIGNvbmZpZyk7XHJcblxyXG4gIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICBjaGVja0lucHV0VmFsaWRpdHkoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgY29uZmlnKTtcclxuICAgICAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCBjb25maWcpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9IChjb25maWcpID0+IHtcclxuICBjb25zdCBmb3JtTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3Rvcik7XHJcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsKSA9PiB7XHJcbiAgICBzZXRFdmVudExpc3RlbmVycyhmb3JtRWwsIGNvbmZpZyk7XHJcblxyXG4gIH0pO1xyXG59O1xyXG5cclxuZW5hYmxlVmFsaWRhdGlvbihzZXR0aW5ncyk7XHJcbiIsIi8vIFRPRE8gLSBQYXNzIHNldHRpbmdzIG9iamVjdCB0byB0aGUgdmFsaWRhdGlvbiBmdW5jdGlvbnMgdGhhdCBhcmUgY2FsbGVkIGluIHRoaXMgZmlsZVxuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcbmltcG9ydCB7IGRpc2FibGVCdXR0b24sIHJlc2V0VmFsaWRhdGlvbiwgZW5hYmxlVmFsaWRhdGlvbiwgc2V0dGluZ3MgfSBmcm9tIFwiLi4vc2NyaXB0cy92YWxpZGF0aW9uLmpzXCI7XG5cbmNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiVmFsIFRob3JlbnNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvMS1waG90by1ieS1tb3JpdHotZmVsZG1hbm4tZnJvbS1wZXhlbHMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlJlc3RhdXJhbnQgdGVycmFjZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy8yLXBob3RvLWJ5LWNlaWxpbmUtZnJvbS1wZXhlbHMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkFuIG91dGRvb3IgY2FmZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy8zLXBob3RvLWJ5LXR1YmFudXItZG9nYW4tZnJvbS1wZXhlbHMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkEgdmVyeSBsb25nIGJyaWRnZSwgb3ZlciB0aGUgZm9yZXN0IGFuZCB0aHJvdWdoIHRoZSB0cmVlc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy80LXBob3RvLWJ5LW1hdXJpY2UtbGFzY2hldC1mcm9tLXBleGVscy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiVHVubmVsIHdpdGggbW9ybmluZyBsaWdodFwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy81LXBob3RvLWJ5LXZhbi1hbmgtbmd1eWVuLWZyb20tcGV4ZWxzLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJNb3VudGFpbiBob3VzZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy82LXBob3RvLWJ5LW1vcml0ei1mZWxkbWFubi1mcm9tLXBleGVscy5qcGdcIixcbiAgfSxcbl07XG5cbi8vIFByb2ZpbGUgZWxlbWVudHNcbmNvbnN0IGVkaXRNb2RhbEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idG5cIik7XG5jb25zdCBjYXJkTW9kYWxCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idG5cIik7XG5jb25zdCBwcm9maWxlTmFtZUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpO1xuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpO1xuY29uc3QgYWRkQ2FyZEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLWZvcm1cIik7XG5cbi8vIEZvcm0gZWxlbWVudHNcbmNvbnN0IGVkaXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdC1tb2RhbFwiKTtcbmNvbnN0IGVkaXRGb3JtID0gZWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG5jb25zdCBlZGl0TW9kYWxDbG9zZUJ0biA9IGVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZS1idG5cIik7XG5jb25zdCBuYW1lSW5wdXQgPSBlZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLW5hbWUtaW5wdXRcIik7XG5jb25zdCBkZXNjcmlwdGlvbklucHV0ID0gZWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1kZXNjcmlwdGlvbi1pbnB1dFwiKTtcblxuLy8gQ2FyZCBmb3JtIGVsZW1lbnRzXG5jb25zdCBjYXJkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLW1vZGFsXCIpO1xuY29uc3QgY2FyZEZvcm0gPSBjYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbmNvbnN0IGNhcmRTdWJtaXRCdG4gPSBjYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc3VibWl0LWJ0blwiKTtcbmNvbnN0IGNhcmRNb2RhbENsb3NlQnRuID0gY2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlLWJ0blwiKTtcbmNvbnN0IGNhcmROYW1lSW5wdXQgPSBjYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1uYW1lLWlucHV0XCIpO1xuY29uc3QgY2FyZExpbmtJbnB1dCA9IGNhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLWxpbmstaW5wdXRcIik7XG5cbi8vIFNlbGVjdCB0aGUgbW9kYWxcbmNvbnN0IHByZXZpZXdNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1tb2RhbFwiKTtcbmNvbnN0IHByZXZpZXdNb2RhbEltYWdlRWwgPSBwcmV2aWV3TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XG5jb25zdCBwcmV2aWV3TW9kYWxDYXB0aW9uRWwgPSBwcmV2aWV3TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2FwdGlvblwiKTtcblxuLy8gQ2FyZCByZWxhdGVkIGVsZW1lbnRzXG5jb25zdCBjYXJkc0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpO1xuY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRlbXBsYXRlXCIpO1xuXG5mdW5jdGlvbiBvcGVuTW9kYWwobW9kYWwpIHtcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlRXNjYXBlKTtcbiAgbW9kYWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBoYW5kbGVNb2RhbENsaWNrKTtcbiAgbW9kYWwuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbn1cblxuY29uc3QgaGFuZGxlTW9kYWxDbGljayA9IChldnQpID0+IHtcbiAgY29uc29sZS5sb2coZXZ0KTtcbiAgaWYgKFxuICAgIGV2dC5jdXJyZW50VGFyZ2V0ID09PSBldnQudGFyZ2V0IHx8XG4gICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fY2xvc2UtYnRuXCIpXG4gICkge1xuICAgIGNsb3NlTW9kYWwoZXZ0LmN1cnJlbnRUYXJnZXQpO1xuICB9XG59O1xuXG5mdW5jdGlvbiBoYW5kbGVFc2NhcGUoZXZ0KSB7XG4gIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgY29uc3Qgb3BlbmVkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX29wZW5lZFwiKTtcbiAgICBjbG9zZU1vZGFsKG9wZW5lZE1vZGFsKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjbG9zZU1vZGFsKG1vZGFsKSB7XG4gIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUVzY2FwZSk7XG4gIG1vZGFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgaGFuZGxlTW9kYWxDbGljayk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUVkaXRGb3JtU3VibWl0KGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgcHJvZmlsZU5hbWVFbC50ZXh0Q29udGVudCA9IG5hbWVJbnB1dC52YWx1ZTtcbiAgcHJvZmlsZURlc2NyaXB0aW9uRWwudGV4dENvbnRlbnQgPSBkZXNjcmlwdGlvbklucHV0LnZhbHVlO1xuICBjbG9zZU1vZGFsKGVkaXRNb2RhbCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUFkZENhcmRTdWJtaXQoZXZ0KSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICBjb25zdCBpbnB1dFZhbHVlcyA9IHsgbmFtZTogY2FyZE5hbWVJbnB1dC52YWx1ZSwgbGluazogY2FyZExpbmtJbnB1dC52YWx1ZSB9O1xuICBjb25zdCBjYXJkRWxlbWVudCA9IGdldENhcmRFbGVtZW50KGlucHV0VmFsdWVzKTtcbiAgY2FyZHNMaXN0LnByZXBlbmQoY2FyZEVsZW1lbnQpO1xuICBkaXNhYmxlQnV0dG9uKGNhcmRTdWJtaXRCdG4sIHNldHRpbmdzKTtcbiAgY2xvc2VNb2RhbChjYXJkTW9kYWwpO1xuICBhZGRDYXJkRm9ybS5yZXNldCgpO1xufVxuXG5mdW5jdGlvbiBnZXRDYXJkRWxlbWVudChkYXRhKSB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZFRlbXBsYXRlLmNvbnRlbnRcbiAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXG4gICAgLmNsb25lTm9kZSh0cnVlKTtcblxuICBjb25zdCBjYXJkTmFtZUVsID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcbiAgY29uc3QgY2FyZEltYWdlRWwgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuICBjb25zdCBjYXJkTGlrZUJ0biA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idG5cIik7XG4gIGNvbnN0IGNhcmREZWxldGVCdG4gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idG5cIik7XG5cbiAgY2FyZE5hbWVFbC50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcbiAgY2FyZEltYWdlRWwuc3JjID0gZGF0YS5saW5rO1xuICBjYXJkSW1hZ2VFbC5hbHQgPSBkYXRhLm5hbWU7XG5cbiAgY2FyZExpa2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBjYXJkTGlrZUJ0bi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idG5fbGlrZWRcIik7XG4gIH0pO1xuXG4gIGNhcmREZWxldGVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBjYXJkRWxlbWVudC5yZW1vdmUoKTtcbiAgfSk7XG5cbiAgY2FyZEltYWdlRWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBvcGVuTW9kYWwocHJldmlld01vZGFsKTtcbiAgICBwcmV2aWV3TW9kYWxJbWFnZUVsLnNyYyA9IGRhdGEubGluaztcbiAgICBwcmV2aWV3TW9kYWxDYXB0aW9uRWwudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG4gICAgcHJldmlld01vZGFsSW1hZ2VFbC5hbHQgPSBkYXRhLm5hbWU7XG4gIH0pO1xuXG4gIHJldHVybiBjYXJkRWxlbWVudDtcbn1cblxuZWRpdE1vZGFsQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIG5hbWVJbnB1dC52YWx1ZSA9IHByb2ZpbGVOYW1lRWwudGV4dENvbnRlbnQ7XG4gIGRlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBwcm9maWxlRGVzY3JpcHRpb25FbC50ZXh0Q29udGVudDtcbiAgcmVzZXRWYWxpZGF0aW9uKGVkaXRGb3JtLCBbbmFtZUlucHV0LCBkZXNjcmlwdGlvbklucHV0XSwgc2V0dGluZ3MpO1xuICBvcGVuTW9kYWwoZWRpdE1vZGFsKTtcbn0pO1xuXG4vLyBlZGl0TW9kYWxDbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuLy8gICBjbG9zZU1vZGFsKGVkaXRNb2RhbCk7XG4vLyB9KTtcblxuY2FyZE1vZGFsQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIG9wZW5Nb2RhbChjYXJkTW9kYWwpO1xufSk7XG5cbi8vIGNhcmRNb2RhbENsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4vLyAgIGNsb3NlTW9kYWwoY2FyZE1vZGFsKTtcbi8vIH0pO1xuXG5lZGl0Rm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZUVkaXRGb3JtU3VibWl0KTtcbmNhcmRGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlQWRkQ2FyZFN1Ym1pdCk7XG5cbmluaXRpYWxDYXJkcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gZ2V0Q2FyZEVsZW1lbnQoaXRlbSk7XG4gIGNhcmRzTGlzdC5wcmVwZW5kKGNhcmRFbGVtZW50KTtcbn0pO1xuXG4vLyBNb2RhbCBwcmV2aWV3IGNsb3NlIGJ1dHRvblxuXG5jb25zdCBjbG9zZU1vZGFsUHJldmlld0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLm1vZGFsX19jbG9zZS1idG5fdHlwZV9wcmV2aWV3XCJcbik7XG5cbmNvbnN0IGNsb3NlTW9kYWxQcmV2aWV3ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcmV2aWV3LW1vZGFsXCIpO1xuXG4vLyBjbG9zZU1vZGFsUHJldmlld0J0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuLy8gICBjbG9zZU1vZGFsKGNsb3NlTW9kYWxQcmV2aWV3KTtcbi8vIH0pO1xuXG5lbmFibGVWYWxpZGF0aW9uKHNldHRpbmdzKTsiXSwibmFtZXMiOlsic2V0dGluZ3MiLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsImhpZGVJbnB1dEVycm9yIiwiZm9ybUVsIiwiaW5wdXRFbCIsImNvbmZpZyIsInF1ZXJ5U2VsZWN0b3IiLCJpZCIsInRleHRDb250ZW50IiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJpbnB1dExpc3QiLCJidXR0b25FbCIsInNvbWUiLCJpbnB1dCIsInZhbGlkaXR5IiwidmFsaWQiLCJoYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlQnV0dG9uIiwiZGlzYWJsZWQiLCJhZGQiLCJlbmFibGVWYWxpZGF0aW9uIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsInNldEV2ZW50TGlzdGVuZXJzIiwiZm9ybUVsZW1lbnQiLCJBcnJheSIsImZyb20iLCJidXR0b25FbGVtZW50IiwiaW5wdXRFbGVtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImNoZWNrSW5wdXRWYWxpZGl0eSIsImNvbnNvbGUiLCJsb2ciLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInNob3dJbnB1dEVycm9yIiwiZWRpdE1vZGFsQnRuIiwiY2FyZE1vZGFsQnRuIiwicHJvZmlsZU5hbWVFbCIsInByb2ZpbGVEZXNjcmlwdGlvbkVsIiwiYWRkQ2FyZEZvcm0iLCJlZGl0TW9kYWwiLCJlZGl0Rm9ybSIsIm5hbWVJbnB1dCIsImRlc2NyaXB0aW9uSW5wdXQiLCJjYXJkTW9kYWwiLCJjYXJkRm9ybSIsImNhcmRTdWJtaXRCdG4iLCJjYXJkTmFtZUlucHV0IiwiY2FyZExpbmtJbnB1dCIsInByZXZpZXdNb2RhbCIsInByZXZpZXdNb2RhbEltYWdlRWwiLCJwcmV2aWV3TW9kYWxDYXB0aW9uRWwiLCJjYXJkc0xpc3QiLCJjYXJkVGVtcGxhdGUiLCJvcGVuTW9kYWwiLCJtb2RhbCIsImhhbmRsZUVzY2FwZSIsImhhbmRsZU1vZGFsQ2xpY2siLCJldnQiLCJjdXJyZW50VGFyZ2V0IiwidGFyZ2V0IiwiY29udGFpbnMiLCJjbG9zZU1vZGFsIiwia2V5IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImdldENhcmRFbGVtZW50IiwiZGF0YSIsImNhcmRFbGVtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsImNhcmROYW1lRWwiLCJjYXJkSW1hZ2VFbCIsImNhcmRMaWtlQnRuIiwiY2FyZERlbGV0ZUJ0biIsIm5hbWUiLCJzcmMiLCJsaW5rIiwiYWx0IiwidG9nZ2xlIiwicmVzZXRWYWxpZGF0aW9uIiwidmFsdWUiLCJwcmV2ZW50RGVmYXVsdCIsInByZXBlbmQiLCJyZXNldCIsIml0ZW0iXSwic291cmNlUm9vdCI6IiJ9